---
title: Tools4You教程4：PCA
tags: Tools4You
categories: Tools4You
abbrlink: b211c402
date: 2021-01-28 19:29:42
---

# PCA简介

PCA（Principal Component Analysis，主成分分析）是常见的降维方法，在生命科学中应用广泛。<!-- more -->关于PCA的原理，推荐观看博主Josh Starmer博士的视频（[点击打开B站视频链接](https://www.bilibili.com/video/BV1fD4y1X7fw)，手机端貌似无法打开链接），真的是深入浅出，极其通透。

# 几点注意事项

- 目前唯一的网址为：http://shinyapp.top:3838/Tools4You/
- `Tools4You`所有模块目前只支持输入`.csv`格式，在Excel中将数据另存为`.csv`格式即可：
  {% asset_img 0.png %}
- 每个分析模块都有对应的示例数据，请按照示例数据的格式整理自己的格式。
- 如果界面和自己电脑屏幕不适配，请适当放大缩小浏览器的显示比例，开发调试用的是27寸屏幕。

# 选择PCA模块

打开网站，选择对应的PCA模块即可：

{% asset_img 1.png %}

# 数据格式

PCA分析输入数据为“长数据“：

{% asset_img 2.png %}

每一行是一个样品，每一列是一个观测指标，最后的“group”和“site"是样品的分组信息，必须有分组信息，这样后面画图才能进行分组显示，分组信息可以有多个，然后画图的时候不同的分组信息控制图形的颜色和形状等。

# 分组信息

{% asset_img 3.png %}

在数据表中有多少个分组信息，就需要在这地方标明，比如我的数据中有两个分组信息：group和site，分别是样品分组信息和样品的位点信息。我就需要在“分组名称”这个输入`group,site`，后面绘图才能进行识别。

# 多元方差分析

如果PCA结果足够好的话，可以直接肉眼观察分组之间是否分开，但是如果分组之间是”若即若离“的，那就不好说到底有没有分开了。这时候就需要多元方差分析了，通常是PERMANOVA。

{% asset_img 4.png %}

默认是进行PERMANOVA分析的。

下方是图片格式，支持多种图形格式，默认的是`PDF`格式。

# 绘图样式

绘图样式有三种，最常见的是置信椭圆样式。

{% asset_img 5.png %}

三种样式对应的图形如下：

{% asset_img 6.png %}

# 展示主成分

PCA分析中主成分的数量和变量的数量是一样的，比如我的数据有4个变量，那就会有4个主成分。

通常只展示前三个主成分，三个主成分两两组合，共有4种组合。

只需要在这个位置输入想展示的主成分即可，注意PC这两个字母需要大写，另外是英文逗号分隔。

{% asset_img 7.png %}

# 散点图相关设置

{% asset_img 8.png %}

剩下的参数主要和散点图的点相关：

- ”点的大小“这个参数就是说散点图中点的大小；
- ”点的透明度“是指散点的透明度，默认是1；
- ”控制点的形状的分组名称“是用数据中的哪个分组信息来控制点的形状，比如”group“；
- ”输入点的形状“，用户直接指定点的形状，但是要和上方分组的数量相同，比如我的”group“有三个，那我的这个地方只能输入三个值；
- 下方两个参数和上方两个类似。

# 点击查看

设置完上述这些参数后，便可以点击左侧的”点击提交“完成分析，如果没有报错，应该得到这样的结果：

{% asset_img 9.png %}

如果没有报错，那就再输入最右侧的参数。输入完成后需要再次点击”点击提交“。

{% asset_img 10.png %}

# 下载结果

完成所有参数后，点击左下角的下载按钮即可。

{% asset_img 11.png %}

可以根据”PCA碎石图“的结果来决定散点图展示哪几个主成分。

下载完图片后对长和宽不满意的话，可以重新设置长和宽，然后点击”点击提交“，最后再下载数据。

# 示例结果

示例数据得到的结果（点的颜色和形状分别用不同的分组控制）如下：

{% asset_img 12.png %}

详细参数如下：

{% asset_img 13.png %}

# [Tools4You教程合集](https://www.blog4xiang.world/categories/Tools4You/)

---

>>💌lixiang117423@gmail.com
>
>>💌lixiang117423@foxmail.com

